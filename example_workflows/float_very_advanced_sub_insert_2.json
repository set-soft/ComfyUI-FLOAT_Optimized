{"id":"5716d3a2-cfc8-47f3-b5d4-edaaf899340d","revision":0,"last_node_id":121,"last_link_id":249,"nodes":[{"id":17,"type":"LoadAudio","pos":[228.6835479736328,1497.0260009765625],"size":[274.080078125,136],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"audio","name":"audio","type":"COMBO","widget":{"name":"audio"},"link":null},{"localized_name":"audioUI","name":"audioUI","type":"AUDIO_UI","widget":{"name":"audioUI"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"AUDIOUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"AUDIO","name":"AUDIO","type":"AUDIO","links":[106,247]}],"title":"Input audio to drive the image","properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"LoadAudio","widget_ue_connectable":{}},"widgets_values":["aud-sample-vs-1.wav",null,null],"color":"#233","bgcolor":"#355"},{"id":104,"type":"MarkdownNote","pos":[228.6835479736328,1682.9906005859375],"size":[274.059814453125,121.7820816040039],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"Input audio to drive the image","properties":{"widget_ue_connectable":{}},"widgets_values":["# Put the audio here\nUse clear voice audio, avoid music that can be confused with the voice"],"color":"#432","bgcolor":"#653"},{"id":1,"type":"LoadImage","pos":[228.6835479736328,1115.759765625],"size":[274.080078125,314.00006103515625],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"choose file to upload","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"IMAGE","name":"IMAGE","type":"IMAGE","links":[245]},{"localized_name":"MASK","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.34","Node name for S&R":"LoadImage","widget_ue_connectable":{}},"widgets_values":["MuskTrump.jpg","image"],"color":"#233","bgcolor":"#355"},{"id":57,"type":"VHS_VideoCombine","pos":[880.947509765625,1194.36669921875],"size":[270,413],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":248},{"localized_name":"audio","name":"audio","shape":7,"type":"AUDIO","link":106},{"localized_name":"meta_batch","name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"localized_name":"vae","name":"vae","shape":7,"type":"VAE","link":null},{"localized_name":"frame_rate","name":"frame_rate","type":"FLOAT","widget":{"name":"frame_rate"},"link":null},{"localized_name":"loop_count","name":"loop_count","type":"INT","widget":{"name":"loop_count"},"link":null},{"localized_name":"filename_prefix","name":"filename_prefix","type":"STRING","widget":{"name":"filename_prefix"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null},{"localized_name":"pingpong","name":"pingpong","type":"BOOLEAN","widget":{"name":"pingpong"},"link":null},{"localized_name":"save_output","name":"save_output","type":"BOOLEAN","widget":{"name":"save_output"},"link":null},{"name":"dither","type":["bayer","heckbert","floyd_steinberg","sierra2","sierra2_4a","sierra3","burkes","atkinson","none"],"widget":{"name":"dither"},"link":null}],"outputs":[{"localized_name":"Filenames","name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"4c7858ddd5126f7293dc3c9f6e0fc4c263cde079","Node name for S&R":"VHS_VideoCombine","widget_ue_connectable":{"frame_rate":true}},"widgets_values":{"frame_rate":25,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/ffmpeg-gif","dither":"sierra2_4a","pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00035-audio.gif","subfolder":"","type":"output","format":"video/ffmpeg-gif","frame_rate":25,"workflow":"AnimateDiff_00035.png","fullpath":"/home/salvador/IA/ComfyUI/output/AnimateDiff_00035-audio.gif"}}},"color":"#222","bgcolor":"#000"},{"id":120,"type":"2cf1933b-6ed6-4383-a259-379e07d7bd3a","pos":[582.3268432617188,1115.6781005859375],"size":[234.543701171875,78],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":245},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":null},{"localized_name":"audio","name":"audio","type":"AUDIO","link":247}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[248]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50"},"widgets_values":[25],"color":"#2a363b","bgcolor":"#3f5159"},{"id":96,"type":"MarkdownNote","pos":[228.6835479736328,935.7607421875],"size":[272.7734069824219,120.59402465820312],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"title":"Load Image","properties":{"widget_ue_connectable":{}},"widgets_values":["# Put an image here\n\n## Should contain 2 faces"],"color":"#432","bgcolor":"#653"}],"links":[[106,17,0,57,1,"AUDIO"],[245,1,0,120,0,"IMAGE"],[247,17,0,120,2,"AUDIO"],[248,120,0,57,0,"IMAGE"]],"groups":[],"definitions":{"subgraphs":[{"id":"72b7e38f-c3fd-4f76-b885-0e699fe24a6c","version":1,"state":{"lastGroupId":0,"lastNodeId":114,"lastLinkId":221,"lastRerouteId":29},"revision":0,"config":{},"name":"Get Identity","inputNode":{"id":-10,"bounding":[658.7623506693959,1198.6362777083737,138.73046875,60]},"outputNode":{"id":-20,"bounding":[1726.6406209985723,1197.6453475235792,142.732421875,80]},"inputs":[{"id":"cee50423-ca39-49e7-b4c4-b4eab38d3ee2","name":"r_s_lambda_latent","type":"TORCH_TENSOR","linkIds":[197],"localized_name":"r_s_lambda_latent","pos":{"0":777.4927978515625,"1":1218.63623046875}}],"outputs":[{"id":"cf54a3c5-c8d6-4d5b-a3d1-5896b198df61","name":"float_synthesis_out","type":"FLOAT_SYNTHESIS_MODEL","linkIds":[188],"localized_name":"float_synthesis_out","pos":{"0":1746.640625,"1":1217.6453857421875}},{"id":"d59c69bd-33e0-4674-aa90-21c5a5c05d52","name":"r_s_latent (Wr→s)","type":"TORCH_TENSOR","linkIds":[215],"localized_name":"r_s_latent (Wr→s)","pos":{"0":1746.640625,"1":1237.6453857421875}}],"widgets":[],"nodes":[{"id":58,"type":"FloatGetIdentityReferenceVA","pos":[1366.3167724609375,1204.29052734375],"size":[262.6831970214844,46],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"r_s_lambda_latent","name":"r_s_lambda_latent","type":"TORCH_TENSOR","link":197},{"localized_name":"float_synthesis","name":"float_synthesis","type":"FLOAT_SYNTHESIS_MODEL","link":113}],"outputs":[{"localized_name":"float_synthesis_out","name":"float_synthesis_out","type":"FLOAT_SYNTHESIS_MODEL","links":[188]},{"localized_name":"r_s_latent (Wr→s)","name":"r_s_latent (Wr→s)","type":"TORCH_TENSOR","links":[215]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"6f4b3c5954ef4dbb69a1c40ea0e645103e4fe15c","Node name for S&R":"FloatGetIdentityReferenceVA","widget_ue_connectable":{}},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":101,"type":"MarkdownNote","pos":[1370,1290],"size":[262.6831970214844,88],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"title":"FLOAT Get Identity Reference  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["The output of this node represents the reference image conditioning (wr)"],"color":"#432","bgcolor":"#653"},{"id":55,"type":"LoadFloatSynthesisModel","pos":[887.9851684570312,1296.8486328125],"size":[417.1148376464844,214],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"synthesis_file","name":"synthesis_file","type":"COMBO","widget":{"name":"synthesis_file"},"link":null},{"localized_name":"target_device","name":"target_device","type":"COMBO","widget":{"name":"target_device"},"link":null},{"localized_name":"channel_multiplier","name":"channel_multiplier","type":"INT","widget":{"name":"channel_multiplier"},"link":null},{"localized_name":"blur_kernel_str","name":"blur_kernel_str","type":"STRING","widget":{"name":"blur_kernel_str"},"link":null},{"localized_name":"cudnn_benchmark","name":"cudnn_benchmark","type":"BOOLEAN","widget":{"name":"cudnn_benchmark"},"link":null},{"localized_name":"advanced_float_options","name":"advanced_float_options","shape":7,"type":"ADV_FLOAT_DICT","link":null}],"outputs":[{"localized_name":"float_synthesis","name":"float_synthesis","type":"FLOAT_SYNTHESIS_MODEL","links":[113]},{"localized_name":"inferred_size","name":"inferred_size","type":"INT","links":null},{"localized_name":"inferred_style_dim","name":"inferred_style_dim","type":"INT","links":null},{"localized_name":"inferred_motion_dim","name":"inferred_motion_dim","type":"INT","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"6f4b3c5954ef4dbb69a1c40ea0e645103e4fe15c","Node name for S&R":"LoadFloatSynthesisModel","widget_ue_connectable":{"synthesis_file":true,"target_device":true,"channel_multiplier":true,"blur_kernel_str":true,"cudnn_benchmark":true}},"widgets_values":["decoder.safetensors","cuda",1,"[1, 3, 3, 1]",false],"color":"#2a363b","bgcolor":"#3f5159"},{"id":100,"type":"MarkdownNote","pos":[960,1550],"size":[290,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"Load FLOAT Synthesis  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["Download this model from: [here](https://huggingface.co/set-soft/float_advanced/resolve/main/motion_autoencoder/decoder.safetensors?download=true)\n\nTo `ComfyUI/models/float/motion_autoencoder/`"],"color":"#432","bgcolor":"#653"}],"groups":[],"links":[{"id":113,"origin_id":55,"origin_slot":0,"target_id":58,"target_slot":1,"type":"FLOAT_SYNTHESIS_MODEL"},{"id":197,"origin_id":-10,"origin_slot":0,"target_id":58,"target_slot":0,"type":"TORCH_TENSOR"},{"id":188,"origin_id":58,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"FLOAT_SYNTHESIS_MODEL"},{"id":215,"origin_id":58,"origin_slot":1,"target_id":-20,"target_slot":1,"type":"TORCH_TENSOR"}],"extra":{}},{"id":"19cd2b17-d1fe-44af-8a9a-755bb117c7f2","version":1,"state":{"lastGroupId":0,"lastNodeId":115,"lastLinkId":224,"lastRerouteId":32},"revision":0,"config":{},"name":"Encode Audio to latent wa","inputNode":{"id":-10,"bounding":[-10.087645750669122,1664.1652032291863,120,80]},"outputNode":{"id":-20,"bounding":[2196.730966202573,1715.1051840721273,181.43359375,100]},"inputs":[{"id":"93ec73bc-db55-4f6b-860c-a41d660bae5f","name":"target_fps","type":"FLOAT","linkIds":[160],"localized_name":"target_fps","pos":{"0":89.912353515625,"1":1684.1651611328125}},{"id":"94fb52f1-bb73-4f11-9856-a1a1058eacd6","name":"audio","type":"AUDIO","linkIds":[57],"localized_name":"audio","pos":{"0":89.912353515625,"1":1704.1651611328125}}],"outputs":[{"id":"e6e9c5a8-fe12-44a8-b19e-d9c1e9a2948a","name":"wa_latent","type":"TORCH_TENSOR","linkIds":[216],"localized_name":"wa_latent","pos":{"0":2216.73095703125,"1":1735.105224609375}},{"id":"3635521d-cadf-44f0-9857-67c4d0e5b774","name":"audio_num_frames","type":"INT","linkIds":[221],"localized_name":"audio_num_frames","pos":{"0":2216.73095703125,"1":1755.105224609375}},{"id":"ee5c233a-79f4-4732-af6c-6cedc89c2fee","name":"processed_audio_features","type":"TORCH_TENSOR","linkIds":[163],"localized_name":"processed_audio_features","pos":{"0":2216.73095703125,"1":1775.105224609375}}],"widgets":[],"nodes":[{"id":76,"type":"FloatAudioPreprocessAndFeatureExtract","pos":[940,1720],"size":[383.78125,182],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","link":158},{"localized_name":"wav2vec_pipe","name":"wav2vec_pipe","type":"WAV2VEC_PIPE","link":173},{"localized_name":"target_fps","name":"target_fps","type":"FLOAT","widget":{"name":"target_fps"},"link":160},{"localized_name":"only_last_features","name":"only_last_features","type":"BOOLEAN","widget":{"name":"only_last_features"},"link":null}],"outputs":[{"localized_name":"wav2vec_features","name":"wav2vec_features","type":"TORCH_TENSOR","links":[164]},{"localized_name":"audio_num_frames","name":"audio_num_frames","type":"INT","links":[221]},{"localized_name":"processed_audio_features","name":"processed_audio_features","type":"TORCH_TENSOR","links":[163]},{"localized_name":"wav2vec_pipe_out","name":"wav2vec_pipe_out","type":"WAV2VEC_PIPE","links":null},{"localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"localized_name":"fps","name":"fps","type":"FLOAT","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"ba5de66d7ccb70613c7efdfafb29f3443a27d998","Node name for S&R":"FloatAudioPreprocessAndFeatureExtract","widget_ue_connectable":{"target_fps":true,"only_last_features":true}},"widgets_values":[25,false],"color":"#2a363b","bgcolor":"#3f5159"},{"id":108,"type":"MarkdownNote","pos":[941.078125,1950.671875],"size":[380,88],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"title":"FLOAT Audio Feature Extract  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["This model process the audio and generates a representation that will be used to extract the emotion and the audio conditioning"],"color":"#432","bgcolor":"#653"},{"id":80,"type":"LoadWav2VecModel","pos":[185.7734832763672,1801.6695556640625],"size":[341.8296813964844,102],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"model_folder","name":"model_folder","type":"COMBO","widget":{"name":"model_folder"},"link":null},{"localized_name":"target_device","name":"target_device","type":"COMBO","widget":{"name":"target_device"},"link":null}],"outputs":[{"localized_name":"sampling_rate","name":"sampling_rate","type":"INT","links":[172]},{"localized_name":"wav2vec_pipe","name":"wav2vec_pipe","type":"WAV2VEC_PIPE","links":[173]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"cd98751e337e7ad09488b7a1af6f8d298ccdd12f","Node name for S&R":"LoadWav2VecModel","widget_ue_connectable":{}},"widgets_values":["wav2vec2-base-960h","cuda"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":105,"type":"MarkdownNote","pos":[179.06016540527344,1949.1824951171875],"size":[341.8296813964844,120],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"Load Wav2Vec Model (for Audio Encoding)  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["Download this model from: [here](https://huggingface.co/facebook/wav2vec2-base-960h/tree/main)\n\nThe whole folder goes to `ComfyUI/models/audio/wav2vec2-base-960h/`\n\nDon't download the `.bin` and `.h5` files, the `.safetensors` is enough."],"color":"#432","bgcolor":"#653"},{"id":106,"type":"MarkdownNote","pos":[603.51416015625,1434.226806640625],"size":[267.1470642089844,90],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"title":"Audio Channel Conv and Resampler","properties":{"widget_ue_connectable":{}},"widgets_values":["This node ensures the audio is mono @ 16 kHz. Is part of my AudioBatch nodes."],"color":"#432","bgcolor":"#653"},{"id":34,"type":"SET_AudioChannelConvResampler","pos":[566.9777221679688,1582.8189697265625],"size":[327.1470642089844,154],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","link":57},{"localized_name":"channel_conversion","name":"channel_conversion","type":"COMBO","widget":{"name":"channel_conversion"},"link":null},{"localized_name":"target_sample_rate","name":"target_sample_rate","type":"INT","widget":{"name":"target_sample_rate"},"link":172},{"localized_name":"downmix_method","name":"downmix_method","type":"COMBO","widget":{"name":"downmix_method"},"link":null},{"localized_name":"n_fft","name":"n_fft","shape":7,"type":"INT","widget":{"name":"n_fft"},"link":null},{"localized_name":"hop_length","name":"hop_length","shape":7,"type":"INT","widget":{"name":"hop_length"},"link":null}],"outputs":[{"localized_name":"audio_out","name":"audio_out","type":"AUDIO","links":[158]}],"properties":{"cnr_id":"audio-batch","ver":"1.0.0","Node name for S&R":"SET_AudioChannelConvResampler","widget_ue_connectable":{"channel_conversion":true,"target_sample_rate":true}},"widgets_values":["force_mono",16000,"standard_gain",2048,512],"color":"#223","bgcolor":"#335"},{"id":103,"type":"MarkdownNote","pos":[1830.0361328125,1429.0943603515625],"size":[290,88],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"title":"FLOAT Apply Audio Projection  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["The output of this node represents the audio conditioning (wa)"],"color":"#432","bgcolor":"#653"},{"id":35,"type":"LoadAudioProjectionLayer","pos":[1394.1920166015625,1412.4158935546875],"size":[383.1812438964844,130],"flags":{"collapsed":false},"order":5,"mode":0,"inputs":[{"localized_name":"projection_file","name":"projection_file","type":"COMBO","widget":{"name":"projection_file"},"link":null},{"localized_name":"target_device","name":"target_device","type":"COMBO","widget":{"name":"target_device"},"link":null}],"outputs":[{"localized_name":"projection_layer","name":"projection_layer","type":"AUDIO_PROJECTION_LAYER","links":[61]},{"localized_name":"inferred_input_dim","name":"inferred_input_dim","type":"INT","links":null},{"localized_name":"dim_a","name":"dim_a","type":"INT","links":[]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"002ed938d83c893aa7646ac933776dadfa84ac33","Node name for S&R":"LoadAudioProjectionLayer","widget_ue_connectable":{"projection_file":true,"target_device":true}},"widgets_values":["projection.safetensors","cuda"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":102,"type":"MarkdownNote","pos":[1396.696533203125,1584.921142578125],"size":[290,88],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"title":"Load Audio Projection Layer  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["Download this model from: [here](https://huggingface.co/set-soft/float_advanced/resolve/main/audio_projections/projection.safetensors?download=true)\n\nTo `ComfyUI/models/float/audio_projections/`"],"color":"#432","bgcolor":"#653"},{"id":36,"type":"FloatApplyAudioProjection","pos":[1830.0361328125,1339.0943603515625],"size":[290,50],"flags":{"collapsed":false},"order":8,"mode":0,"inputs":[{"localized_name":"wav2vec_features","name":"wav2vec_features","type":"TORCH_TENSOR","link":164},{"localized_name":"projection_layer","name":"projection_layer","type":"AUDIO_PROJECTION_LAYER","link":61}],"outputs":[{"localized_name":"wa_latent","name":"wa_latent","type":"TORCH_TENSOR","links":[216]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"002ed938d83c893aa7646ac933776dadfa84ac33","Node name for S&R":"FloatApplyAudioProjection","widget_ue_connectable":{}},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"}],"groups":[],"links":[{"id":164,"origin_id":76,"origin_slot":0,"target_id":36,"target_slot":0,"type":"TORCH_TENSOR","parentId":32},{"id":61,"origin_id":35,"origin_slot":0,"target_id":36,"target_slot":1,"type":"AUDIO_PROJECTION_LAYER"},{"id":158,"origin_id":34,"origin_slot":0,"target_id":76,"target_slot":0,"type":"AUDIO"},{"id":173,"origin_id":80,"origin_slot":1,"target_id":76,"target_slot":1,"type":"WAV2VEC_PIPE"},{"id":172,"origin_id":80,"origin_slot":0,"target_id":34,"target_slot":2,"type":"INT"},{"id":160,"origin_id":-10,"origin_slot":0,"target_id":76,"target_slot":2,"type":"FLOAT","parentId":31},{"id":57,"origin_id":-10,"origin_slot":1,"target_id":34,"target_slot":0,"type":"AUDIO","parentId":18},{"id":216,"origin_id":36,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"TORCH_TENSOR"},{"id":221,"origin_id":76,"origin_slot":1,"target_id":-20,"target_slot":1,"type":"INT","parentId":29},{"id":163,"origin_id":76,"origin_slot":2,"target_id":-20,"target_slot":2,"type":"TORCH_TENSOR"}],"reroutes":[{"id":30,"pos":[157.65538024902344,2103.583251953125],"linkIds":[160]},{"id":31,"parentId":30,"pos":[512.6895141601562,2107.315673828125],"linkIds":[160]},{"id":32,"pos":[1376.158447265625,1369.339111328125],"linkIds":[164]}],"extra":{}},{"id":"8a61e7d5-dd0f-4696-8b1a-af3b9d53acc4","version":1,"state":{"lastGroupId":0,"lastNodeId":116,"lastLinkId":229,"lastRerouteId":29},"revision":0,"config":{},"name":"Encode Emotion to latent we","inputNode":{"id":-10,"bounding":[745.953620240289,1777.4537279591996,181.43359375,60]},"outputNode":{"id":-20,"bounding":[1980,2056.0728759765625,120,80]},"inputs":[{"id":"068e18a6-f8c5-4282-93ed-2848ff1bdead","name":"processed_audio_features","type":"TORCH_TENSOR","linkIds":[229],"localized_name":"processed_audio_features","pos":{"0":907.38720703125,"1":1797.4537353515625}}],"outputs":[{"id":"69cd6a4f-2bab-41de-bdb5-aa995476aaec","name":"dim_e","type":"INT","linkIds":[166],"localized_name":"dim_e","pos":{"0":2000,"1":2076.07275390625}},{"id":"1d82f2d0-6f3d-43a4-bedf-8aa6821bf565","name":"we_latent","type":"TORCH_TENSOR","linkIds":[218],"localized_name":"we_latent","pos":{"0":2000,"1":2096.07275390625}}],"widgets":[],"nodes":[{"id":44,"type":"LoadEmotionRecognitionModel","pos":[960,2130],"size":[409.96868896484375,102],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"model_folder","name":"model_folder","type":"COMBO","widget":{"name":"model_folder"},"link":null},{"localized_name":"target_device","name":"target_device","type":"COMBO","widget":{"name":"target_device"},"link":null}],"outputs":[{"localized_name":"emotion_model_pipe","name":"emotion_model_pipe","type":"EMOTION_MODEL_PIPE","links":[71]},{"localized_name":"dim_e","name":"dim_e","type":"INT","links":[166]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"1734e37ec582b76a97f2a394fdef78dd654b2aea","Node name for S&R":"LoadEmotionRecognitionModel","widget_ue_connectable":{"model_folder":true,"target_device":true}},"widgets_values":["wav2vec-english-speech-emotion-recognition","cuda"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":111,"type":"MarkdownNote","pos":[1570,1900],"size":[350,90],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"title":"FLOAT Extract Emotion from Features  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["The output of this node represents the emotion conditioning (we). Can be from the audio or one selected."],"color":"#432","bgcolor":"#653"},{"id":45,"type":"FloatExtractEmotionWithCustomModel","pos":[1571.390625,1782.145751953125],"size":[347.5732727050781,78],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"processed_audio_features","name":"processed_audio_features","type":"TORCH_TENSOR","link":229},{"localized_name":"emotion_model_pipe","name":"emotion_model_pipe","type":"EMOTION_MODEL_PIPE","link":71},{"localized_name":"emotion","name":"emotion","type":"COMBO","widget":{"name":"emotion"},"link":null}],"outputs":[{"localized_name":"we_latent","name":"we_latent","type":"TORCH_TENSOR","links":[218]},{"localized_name":"emotion_model_pipe_out","name":"emotion_model_pipe_out","type":"EMOTION_MODEL_PIPE","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"1734e37ec582b76a97f2a394fdef78dd654b2aea","Node name for S&R":"FloatExtractEmotionWithCustomModel","widget_ue_connectable":{"emotion":true}},"widgets_values":["none"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":107,"type":"MarkdownNote","pos":[982.1202392578125,2276.812255859375],"size":[341.8296813964844,120],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"Load Emotion Recognition Model  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["Download this model from: [here](https://huggingface.co/r-f/wav2vec-english-speech-emotion-recognition/tree/main)\n\nThe whole folder goes to `ComfyUI/models/audio/wav2vec-english-speech-emotion-recognition/`"],"color":"#432","bgcolor":"#653"}],"groups":[],"links":[{"id":71,"origin_id":44,"origin_slot":0,"target_id":45,"target_slot":1,"type":"EMOTION_MODEL_PIPE"},{"id":229,"origin_id":-10,"origin_slot":0,"target_id":45,"target_slot":0,"type":"TORCH_TENSOR"},{"id":166,"origin_id":44,"origin_slot":1,"target_id":-20,"target_slot":0,"type":"INT"},{"id":218,"origin_id":45,"origin_slot":0,"target_id":-20,"target_slot":1,"type":"TORCH_TENSOR"}],"extra":{}},{"id":"37198276-96b1-4906-a26d-e1c75359024e","version":1,"state":{"lastGroupId":0,"lastNodeId":117,"lastLinkId":232,"lastRerouteId":29},"revision":0,"config":{},"name":"Sample Motion Sequence rd","inputNode":{"id":-10,"bounding":[1583.2047410461435,1405.5590416076652,142.7265625,160]},"outputNode":{"id":-20,"bounding":[2690.3876218039763,1336.0809645435688,146.470703125,60]},"inputs":[{"id":"128559ca-ad08-4549-8e2e-6a38a5d06acc","name":"dim_e","type":"INT","linkIds":[231],"localized_name":"dim_e","pos":{"0":1705.9312744140625,"1":1425.55908203125}},{"id":"51448776-fdc5-4704-86bf-271961e8dfca","name":"fps","type":"FLOAT","linkIds":[167],"localized_name":"fps","pos":{"0":1705.9312744140625,"1":1445.55908203125}},{"id":"29385995-47cc-44ef-b7e7-47e756ca18ac","name":"r_s_latent","type":"TORCH_TENSOR","linkIds":[224],"localized_name":"r_s_latent","pos":{"0":1705.9312744140625,"1":1465.55908203125}},{"id":"33465f73-911e-4482-b179-1b62df0724f4","name":"wa_latent","type":"TORCH_TENSOR","linkIds":[227],"localized_name":"wa_latent","pos":{"0":1705.9312744140625,"1":1485.55908203125}},{"id":"4a1eade0-805b-4702-8382-b223d335ea21","name":"audio_num_frames","type":"INT","linkIds":[228],"localized_name":"audio_num_frames","pos":{"0":1705.9312744140625,"1":1505.55908203125}},{"id":"431f6ec9-b22b-4b89-9a06-4a3f907f08cd","name":"we_latent","type":"TORCH_TENSOR","linkIds":[232],"localized_name":"we_latent","pos":{"0":1705.9312744140625,"1":1525.55908203125}}],"outputs":[{"id":"2facfb6b-3d71-4c10-8c8a-58adb0628221","name":"r_d_latents (Wr→D)","type":"TORCH_TENSOR","linkIds":[220],"localized_name":"r_d_latents (Wr→D)","pos":{"0":2710.3876953125,"1":1356.0809326171875}}],"widgets":[],"nodes":[{"id":110,"type":"MarkdownNote","pos":[1620,2380],"size":[290,88],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"title":"Load FLOAT FMT Model  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["Download this model from: [here](https://huggingface.co/set-soft/float_advanced/resolve/main/fmt/fmt.safetensors?download=true)\n\nTo `ComfyUI/models/float/fmt/`"],"color":"#432","bgcolor":"#653"},{"id":112,"type":"MarkdownNote","pos":[2320,1830],"size":[320,88],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"title":"Sample Motion Sequence RD  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["This node makes the main inference"],"color":"#432","bgcolor":"#653"},{"id":78,"type":"LoadFMTModel","pos":[1867.26953125,1631.679931640625],"size":[288.4283142089844,310],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"fmt_file","name":"fmt_file","type":"COMBO","widget":{"name":"fmt_file"},"link":null},{"localized_name":"target_device","name":"target_device","type":"COMBO","widget":{"name":"target_device"},"link":null},{"localized_name":"cudnn_benchmark","name":"cudnn_benchmark","type":"BOOLEAN","widget":{"name":"cudnn_benchmark"},"link":null},{"localized_name":"dim_e","name":"dim_e","type":"INT","widget":{"name":"dim_e"},"link":231},{"localized_name":"num_heads","name":"num_heads","type":"INT","widget":{"name":"num_heads"},"link":null},{"localized_name":"attention_window","name":"attention_window","type":"INT","widget":{"name":"attention_window"},"link":null},{"localized_name":"num_prev_frames","name":"num_prev_frames","type":"INT","widget":{"name":"num_prev_frames"},"link":null},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":167},{"localized_name":"wav2vec_sec","name":"wav2vec_sec","type":"FLOAT","widget":{"name":"wav2vec_sec"},"link":null}],"outputs":[{"localized_name":"float_fmt_model","name":"float_fmt_model","type":"FLOAT_FMT_MODEL","links":[219]},{"localized_name":"fps","name":"fps","type":"FLOAT","links":[171]},{"localized_name":"fmt_options_out","name":"fmt_options_out","type":"ADV_FLOAT_DICT","links":[]},{"localized_name":"conditioning_chunk_size","name":"conditioning_chunk_size","type":"INT","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"946cba9c08d2ece9be39f6af8925b29ef9ddaddc","Node name for S&R":"LoadFMTModel","widget_ue_connectable":{"fmt_file":true,"target_device":true,"cudnn_benchmark":true,"dim_e":true,"num_heads":true,"attention_window":true,"num_prev_frames":true,"fps":true,"wav2vec_sec":true}},"widgets_values":["fmt.safetensors","cuda",false,7,8,2,10,25,2],"color":"#2a363b","bgcolor":"#3f5159"},{"id":114,"type":"FloatSampleMotionSequenceRD_VA","pos":[2320,1340],"size":[319.0738220214844,450],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"r_s_latent","name":"r_s_latent","type":"TORCH_TENSOR","link":224},{"localized_name":"wa_latent","name":"wa_latent","type":"TORCH_TENSOR","link":227},{"localized_name":"audio_num_frames","name":"audio_num_frames","type":"INT","link":228},{"localized_name":"we_latent","name":"we_latent","type":"TORCH_TENSOR","link":232},{"localized_name":"float_fmt_model","name":"float_fmt_model","type":"FLOAT_FMT_MODEL","link":219},{"localized_name":"a_cfg_scale","name":"a_cfg_scale","type":"FLOAT","widget":{"name":"a_cfg_scale"},"link":null},{"localized_name":"r_cfg_scale","name":"r_cfg_scale","type":"FLOAT","widget":{"name":"r_cfg_scale"},"link":null},{"localized_name":"e_cfg_scale","name":"e_cfg_scale","type":"FLOAT","widget":{"name":"e_cfg_scale"},"link":null},{"localized_name":"include_r_cfg","name":"include_r_cfg","type":"BOOLEAN","widget":{"name":"include_r_cfg"},"link":null},{"localized_name":"nfe","name":"nfe","type":"INT","widget":{"name":"nfe"},"link":null},{"localized_name":"torchdiffeq_ode_method","name":"torchdiffeq_ode_method","type":"COMBO","widget":{"name":"torchdiffeq_ode_method"},"link":null},{"localized_name":"ode_atol","name":"ode_atol","type":"FLOAT","widget":{"name":"ode_atol"},"link":null},{"localized_name":"ode_rtol","name":"ode_rtol","type":"FLOAT","widget":{"name":"ode_rtol"},"link":null},{"localized_name":"audio_dropout_prob","name":"audio_dropout_prob","type":"FLOAT","widget":{"name":"audio_dropout_prob"},"link":null},{"localized_name":"ref_dropout_prob","name":"ref_dropout_prob","type":"FLOAT","widget":{"name":"ref_dropout_prob"},"link":null},{"localized_name":"emotion_dropout_prob","name":"emotion_dropout_prob","type":"FLOAT","widget":{"name":"emotion_dropout_prob"},"link":null},{"localized_name":"fix_noise_seed","name":"fix_noise_seed","type":"BOOLEAN","widget":{"name":"fix_noise_seed"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"r_d_latents (Wr→D)","name":"r_d_latents (Wr→D)","type":"TORCH_TENSOR","links":[220]},{"localized_name":"float_fmt_model_out","name":"float_fmt_model_out","type":"FLOAT_FMT_MODEL","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"e5945270df082102f672c20bf4a46cee936cc571","Node name for S&R":"FloatSampleMotionSequenceRD_VA","widget_ue_connectable":{}},"widgets_values":[2,1,1,false,10,"euler",0.00001,0.00001,0.1,0.1,0.1,true,15,"fixed"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":71,"type":"Note","pos":[1877.1121826171875,1999.2928466796875],"size":[280,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["Some experimental values:\n\n25 fps → wav2vec_sec 2\n30 fps → wav2vec_sec 1"],"color":"#432","bgcolor":"#653"}],"groups":[],"links":[{"id":219,"origin_id":78,"origin_slot":0,"target_id":114,"target_slot":4,"type":"FLOAT_FMT_MODEL"},{"id":231,"origin_id":-10,"origin_slot":0,"target_id":78,"target_slot":3,"type":"INT"},{"id":167,"origin_id":-10,"origin_slot":1,"target_id":78,"target_slot":7,"type":"FLOAT"},{"id":224,"origin_id":-10,"origin_slot":2,"target_id":114,"target_slot":0,"type":"TORCH_TENSOR"},{"id":227,"origin_id":-10,"origin_slot":3,"target_id":114,"target_slot":1,"type":"TORCH_TENSOR"},{"id":228,"origin_id":-10,"origin_slot":4,"target_id":114,"target_slot":2,"type":"INT","parentId":29},{"id":232,"origin_id":-10,"origin_slot":5,"target_id":114,"target_slot":3,"type":"TORCH_TENSOR"},{"id":220,"origin_id":114,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"TORCH_TENSOR"}],"extra":{}},{"id":"2cf1933b-6ed6-4383-a259-379e07d7bd3a","version":1,"state":{"lastGroupId":0,"lastNodeId":134,"lastLinkId":272,"lastRerouteId":36},"revision":0,"config":{},"name":"FLOAT Very Advanced","inputNode":{"id":-10,"bounding":[329.44481691481093,1271.00052079539,120,100]},"outputNode":{"id":-20,"bounding":[2522.3453962762105,1412.8502706573795,120,60]},"inputs":[{"id":"54968ddd-86b8-4790-b5bd-dcc957846be5","name":"image","type":"IMAGE","linkIds":[248,258,265],"localized_name":"image","pos":{"0":429.44482421875,"1":1291.00048828125}},{"id":"86b12460-270b-42c1-8563-10b8ee10f843","name":"fps","type":"FLOAT","linkIds":[253,271],"localized_name":"fps","pos":{"0":429.44482421875,"1":1311.00048828125}},{"id":"2307e44f-db83-4bde-be94-33fc3104349c","name":"audio","type":"AUDIO","linkIds":[254,272],"localized_name":"audio","pos":{"0":429.44482421875,"1":1331.00048828125}}],"outputs":[{"id":"5252e024-7304-4861-885b-352d78f7afbe","name":"images","type":"IMAGE","linkIds":[269],"localized_name":"images","pos":{"0":2542.345458984375,"1":1432.8502197265625}}],"widgets":[],"nodes":[{"id":124,"type":"FloatImageFaceAlign","pos":[959.7276000976562,791.8870849609375],"size":[270,166.00006103515625],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":258},{"localized_name":"face_margin","name":"face_margin","type":"FLOAT","widget":{"name":"face_margin"},"link":null},{"localized_name":"rgba_conversion","name":"rgba_conversion","type":"COMBO","widget":{"name":"rgba_conversion"},"link":null},{"localized_name":"bkg_color_hex","name":"bkg_color_hex","type":"STRING","widget":{"name":"bkg_color_hex"},"link":null},{"localized_name":"size","name":"size","shape":7,"type":"INT","widget":{"name":"size"},"link":256},{"localized_name":"index","name":"index","shape":7,"type":"INT","widget":{"name":"index"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[257,260]},{"localized_name":"bboxes","name":"bboxes","type":"BBOX","links":[261]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"cd98751e337e7ad09488b7a1af6f8d298ccdd12f","Node name for S&R":"FloatImageFaceAlign","widget_ue_connectable":{}},"widgets_values":[1.6,"blend_with_color","#000000",512,1],"color":"#2a363b","bgcolor":"#3f5159"},{"id":120,"type":"SET_CompositeFace","pos":[1814.0548095703125,1560.564208984375],"size":[184.6609649658203,66],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"animated","name":"animated","type":"IMAGE","link":255},{"localized_name":"reference","name":"reference","type":"IMAGE","link":248},{"localized_name":"bboxes","name":"bboxes","type":"BBOX","link":261}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[267]}],"properties":{"cnr_id":"image-misc","ver":"bb890e2027aeb5397c725e93b908b95c601bc581","Node name for S&R":"SET_CompositeFace"},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":129,"type":"SET_CompositeFaceFrameByFrame","pos":[2159.106689453125,1418.3585205078125],"size":[249.18222045898438,66],"flags":{},"order":11,"mode":0,"inputs":[{"localized_name":"animated","name":"animated","type":"IMAGE","link":266},{"localized_name":"reference","name":"reference","type":"IMAGE","link":267},{"localized_name":"bboxes","name":"bboxes","type":"BBOX","link":268}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[269]}],"properties":{"cnr_id":"image-misc","ver":"bb890e2027aeb5397c725e93b908b95c601bc581","Node name for S&R":"SET_CompositeFaceFrameByFrame"},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":125,"type":"LoadFloatEncoderModel","pos":[617.6619873046875,1011.7164916992188],"size":[270,166],"flags":{"collapsed":false},"order":0,"mode":0,"inputs":[{"localized_name":"encoder_file","name":"encoder_file","type":"COMBO","widget":{"name":"encoder_file"},"link":null},{"localized_name":"target_device","name":"target_device","type":"COMBO","widget":{"name":"target_device"},"link":null},{"localized_name":"cudnn_benchmark","name":"cudnn_benchmark","type":"BOOLEAN","widget":{"name":"cudnn_benchmark"},"link":null}],"outputs":[{"localized_name":"inferred_input_size","name":"inferred_input_size","type":"INT","links":[256]},{"localized_name":"dim_w","name":"dim_w","type":"INT","links":[]},{"localized_name":"dim_m","name":"dim_m","type":"INT","links":[]},{"localized_name":"float_encoder","name":"float_encoder","type":"FLOAT_ENCODER_MODEL","links":[259,263]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"6f4b3c5954ef4dbb69a1c40ea0e645103e4fe15c","Node name for S&R":"LoadFloatEncoderModel","widget_ue_connectable":{"encoder_file":true,"target_device":true,"cudnn_benchmark":true}},"widgets_values":["encoder.safetensors","cuda",false],"color":"#2a363b","bgcolor":"#3f5159"},{"id":128,"type":"FloatImageFaceAlign","pos":[956.343994140625,1386.8857421875],"size":[270,166.00006103515625],"flags":{},"order":10,"mode":0,"inputs":[{"localized_name":"image","name":"image","type":"IMAGE","link":265},{"localized_name":"face_margin","name":"face_margin","type":"FLOAT","widget":{"name":"face_margin"},"link":null},{"localized_name":"rgba_conversion","name":"rgba_conversion","type":"COMBO","widget":{"name":"rgba_conversion"},"link":null},{"localized_name":"bkg_color_hex","name":"bkg_color_hex","type":"STRING","widget":{"name":"bkg_color_hex"},"link":null},{"localized_name":"size","name":"size","shape":7,"type":"INT","widget":{"name":"size"},"link":null},{"localized_name":"index","name":"index","shape":7,"type":"INT","widget":{"name":"index"},"link":null}],"outputs":[{"localized_name":"image","name":"image","type":"IMAGE","links":[264,270]},{"localized_name":"bboxes","name":"bboxes","type":"BBOX","links":[268]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"cd98751e337e7ad09488b7a1af6f8d298ccdd12f","Node name for S&R":"FloatImageFaceAlign","widget_ue_connectable":{}},"widgets_values":[1.6,"blend_with_color","#000000",512,2],"color":"#2a363b","bgcolor":"#3f5159"},{"id":130,"type":"PreviewImage","pos":[1288.3802490234375,1711.151611328125],"size":[140,246],"flags":{},"order":12,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":270}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.40","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[],"color":"#233","bgcolor":"#355"},{"id":123,"type":"PreviewImage","pos":[1420.405029296875,593.5670776367188],"size":[140,246.00003051757812],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"images","name":"images","type":"IMAGE","link":257}],"outputs":[],"properties":{"cnr_id":"comfy-core","ver":"0.3.40","Node name for S&R":"PreviewImage","widget_ue_connectable":{}},"widgets_values":[],"color":"#233","bgcolor":"#355"},{"id":131,"type":"Note","pos":[1588.35595703125,822.303466796875],"size":[210,88],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Here we animate one face"],"color":"#432","bgcolor":"#653"},{"id":132,"type":"Note","pos":[1462.15576171875,1395.67236328125],"size":[210,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Here we animate other face"],"color":"#432","bgcolor":"#653"},{"id":133,"type":"Note","pos":[1818.802734375,1679.2913818359375],"size":[210,88],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Insert one animated face in the reference image"],"color":"#432","bgcolor":"#653"},{"id":134,"type":"Note","pos":[2176.298583984375,1530.689697265625],"size":[210,88],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Insert the other animated face in the video"],"color":"#432","bgcolor":"#653"},{"id":121,"type":"e479f9cf-d4c9-4a66-9172-ff3753efdc1e","pos":[1471.390625,982.1209716796875],"size":[210,98],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"ref_image","name":"ref_image","type":"IMAGE","link":260},{"localized_name":"float_encoder","name":"float_encoder","type":"FLOAT_ENCODER_MODEL","link":259},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":253},{"localized_name":"audio","name":"audio","type":"AUDIO","link":254}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[255]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50"},"widgets_values":[25],"color":"#2a363b","bgcolor":"#3f5159"},{"id":127,"type":"80b5a70e-7a71-44a4-b00d-79362324c08c","pos":[1465.7474365234375,1251.513427734375],"size":[210,98],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"ref_image","name":"ref_image","type":"IMAGE","link":264},{"localized_name":"float_encoder","name":"float_encoder","type":"FLOAT_ENCODER_MODEL","link":263},{"localized_name":"fps","name":"fps","type":"FLOAT","link":271},{"localized_name":"audio","name":"audio","type":"AUDIO","link":272}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[266]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50"},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"}],"groups":[],"links":[{"id":248,"origin_id":-10,"origin_slot":0,"target_id":120,"target_slot":1,"type":"IMAGE","parentId":33},{"id":253,"origin_id":-10,"origin_slot":1,"target_id":121,"target_slot":2,"type":"FLOAT","parentId":30},{"id":254,"origin_id":-10,"origin_slot":2,"target_id":121,"target_slot":3,"type":"AUDIO"},{"id":255,"origin_id":121,"origin_slot":0,"target_id":120,"target_slot":0,"type":"IMAGE"},{"id":256,"origin_id":125,"origin_slot":0,"target_id":124,"target_slot":4,"type":"INT"},{"id":257,"origin_id":124,"origin_slot":0,"target_id":123,"target_slot":0,"type":"IMAGE"},{"id":258,"origin_id":-10,"origin_slot":0,"target_id":124,"target_slot":0,"type":"IMAGE","parentId":36},{"id":259,"origin_id":125,"origin_slot":3,"target_id":121,"target_slot":1,"type":"FLOAT_ENCODER_MODEL"},{"id":260,"origin_id":124,"origin_slot":0,"target_id":121,"target_slot":0,"type":"IMAGE"},{"id":261,"origin_id":124,"origin_slot":1,"target_id":120,"target_slot":2,"type":"BBOX","parentId":34},{"id":263,"origin_id":125,"origin_slot":3,"target_id":127,"target_slot":1,"type":"FLOAT_ENCODER_MODEL"},{"id":264,"origin_id":128,"origin_slot":0,"target_id":127,"target_slot":0,"type":"IMAGE"},{"id":265,"origin_id":-10,"origin_slot":0,"target_id":128,"target_slot":0,"type":"IMAGE"},{"id":266,"origin_id":127,"origin_slot":0,"target_id":129,"target_slot":0,"type":"IMAGE"},{"id":267,"origin_id":120,"origin_slot":0,"target_id":129,"target_slot":1,"type":"IMAGE"},{"id":268,"origin_id":128,"origin_slot":1,"target_id":129,"target_slot":2,"type":"BBOX"},{"id":269,"origin_id":129,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"},{"id":270,"origin_id":128,"origin_slot":0,"target_id":130,"target_slot":0,"type":"IMAGE"},{"id":271,"origin_id":-10,"origin_slot":1,"target_id":127,"target_slot":2,"type":"FLOAT"},{"id":272,"origin_id":-10,"origin_slot":2,"target_id":127,"target_slot":3,"type":"AUDIO"}],"reroutes":[{"id":33,"pos":[636.2703247070312,1583.106201171875],"linkIds":[248]},{"id":34,"pos":[1351.9444580078125,1608.000244140625],"linkIds":[261]},{"id":36,"pos":[548.135498046875,863.086181640625],"linkIds":[258]}],"extra":{}},{"id":"e479f9cf-d4c9-4a66-9172-ff3753efdc1e","version":1,"state":{"lastGroupId":0,"lastNodeId":120,"lastLinkId":250,"lastRerouteId":35},"revision":0,"config":{},"name":"FLOAT","inputNode":{"id":-10,"bounding":[670,1218.0802612304688,120,120]},"outputNode":{"id":-20,"bounding":[2504.23876953125,1248.0802612304688,120,60]},"inputs":[{"id":"07fd15fa-a48e-4d2b-beee-c6fb4bcff453","name":"ref_image","type":"IMAGE","linkIds":[244],"localized_name":"ref_image","pos":{"0":770,"1":1238.080322265625}},{"id":"e44ae62b-c568-4e4c-be2d-e4185625b6e9","name":"float_encoder","type":"FLOAT_ENCODER_MODEL","linkIds":[243],"localized_name":"float_encoder","pos":{"0":770,"1":1258.080322265625}},{"id":"909a0881-6778-4af2-bb15-aecd43783ebf","name":"fps","type":"FLOAT","linkIds":[234,245],"localized_name":"fps","pos":{"0":770,"1":1278.080322265625}},{"id":"f1573760-6a28-4688-9af9-eb31a82f9ca5","name":"audio","type":"AUDIO","linkIds":[226],"localized_name":"audio","pos":{"0":770,"1":1298.080322265625}}],"outputs":[{"id":"4a5817d4-dd29-4134-a1c0-dce08a7c10ea","name":"images","type":"IMAGE","linkIds":[246],"localized_name":"images","pos":{"0":2524.23876953125,"1":1268.080322265625}}],"widgets":[],"nodes":[{"id":89,"type":"ApplyFloatEncoder","pos":[850,1100],"size":[255.1171875,86],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"ref_image","name":"ref_image","type":"IMAGE","link":244},{"localized_name":"float_encoder","name":"float_encoder","type":"FLOAT_ENCODER_MODEL","link":243}],"outputs":[{"localized_name":"appearance_pipe (Ws→r)","name":"appearance_pipe (Ws→r)","type":"FLOAT_APPEARANCE_PIPE","links":[198]},{"localized_name":"r_s_lambda_latent","name":"r_s_lambda_latent","type":"TORCH_TENSOR","links":[222]},{"localized_name":"float_encoder_out","name":"float_encoder_out","type":"FLOAT_ENCODER_MODEL","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"5787c6d5d82668b7c978f32f71e8731c5eaa0d8b","Node name for S&R":"ApplyFloatEncoder","widget_ue_connectable":{}},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":118,"type":"37198276-96b1-4906-a26d-e1c75359024e","pos":[1864.4227294921875,1257.5780029296875],"size":[269.3753356933594,142],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"dim_e","name":"dim_e","type":"INT","widget":{"name":"dim_e"},"link":233},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":234},{"localized_name":"r_s_latent","name":"r_s_latent","type":"TORCH_TENSOR","link":235},{"localized_name":"wa_latent","name":"wa_latent","type":"TORCH_TENSOR","link":236},{"localized_name":"audio_num_frames","name":"audio_num_frames","type":"INT","link":237},{"localized_name":"we_latent","name":"we_latent","type":"TORCH_TENSOR","link":238}],"outputs":[{"localized_name":"r_d_latents (Wr→D)","name":"r_d_latents (Wr→D)","type":"TORCH_TENSOR","links":[240]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50"},"widgets_values":[7,25],"color":"#2a363b","bgcolor":"#3f5159"},{"id":115,"type":"72b7e38f-c3fd-4f76-b885-0e699fe24a6c","pos":[1192.240234375,1193.22265625],"size":[246.462890625,46],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"r_s_lambda_latent","name":"r_s_lambda_latent","type":"TORCH_TENSOR","link":222}],"outputs":[{"localized_name":"float_synthesis_out","name":"float_synthesis_out","type":"FLOAT_SYNTHESIS_MODEL","links":[223]},{"localized_name":"r_s_latent (Wr→s)","name":"r_s_latent (Wr→s)","type":"TORCH_TENSOR","links":[235]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50"},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":88,"type":"ApplyFloatSynthesis","pos":[2203.75830078125,1087.3193359375],"size":[240.48046875,70],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"appearance_pipe","name":"appearance_pipe","type":"FLOAT_APPEARANCE_PIPE","link":198},{"localized_name":"float_synthesis","name":"float_synthesis","type":"FLOAT_SYNTHESIS_MODEL","link":223},{"localized_name":"r_d_latents","name":"r_d_latents","type":"TORCH_TENSOR","link":240}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[246]},{"localized_name":"float_synthesis_out","name":"float_synthesis_out","type":"FLOAT_SYNTHESIS_MODEL","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"5787c6d5d82668b7c978f32f71e8731c5eaa0d8b","Node name for S&R":"ApplyFloatSynthesis","widget_ue_connectable":{}},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":117,"type":"8a61e7d5-dd0f-4696-8b1a-af3b9d53acc4","pos":[1517.0186767578125,1401.187744140625],"size":[276.4378662109375,47.37982940673828],"flags":{"collapsed":false},"order":4,"mode":0,"inputs":[{"localized_name":"processed_audio_features","name":"processed_audio_features","type":"TORCH_TENSOR","link":230}],"outputs":[{"localized_name":"dim_e","name":"dim_e","type":"INT","links":[233]},{"localized_name":"we_latent","name":"we_latent","type":"TORCH_TENSOR","links":[238]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50"},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":116,"type":"19cd2b17-d1fe-44af-8a9a-755bb117c7f2","pos":[1199.0941162109375,1312.0333251953125],"size":[255.80982971191406,100.0697250366211],"flags":{"collapsed":false},"order":3,"mode":0,"inputs":[{"localized_name":"target_fps","name":"target_fps","type":"FLOAT","widget":{"name":"target_fps"},"link":245},{"localized_name":"audio","name":"audio","type":"AUDIO","link":226}],"outputs":[{"localized_name":"wa_latent","name":"wa_latent","type":"TORCH_TENSOR","links":[236]},{"localized_name":"audio_num_frames","name":"audio_num_frames","type":"INT","links":[237]},{"localized_name":"processed_audio_features","name":"processed_audio_features","type":"TORCH_TENSOR","links":[230]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50"},"widgets_values":[25],"color":"#2a363b","bgcolor":"#3f5159"}],"groups":[],"links":[{"id":233,"origin_id":117,"origin_slot":0,"target_id":118,"target_slot":0,"type":"INT"},{"id":235,"origin_id":115,"origin_slot":1,"target_id":118,"target_slot":2,"type":"TORCH_TENSOR"},{"id":236,"origin_id":116,"origin_slot":0,"target_id":118,"target_slot":3,"type":"TORCH_TENSOR"},{"id":237,"origin_id":116,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":238,"origin_id":117,"origin_slot":1,"target_id":118,"target_slot":5,"type":"TORCH_TENSOR"},{"id":222,"origin_id":89,"origin_slot":1,"target_id":115,"target_slot":0,"type":"TORCH_TENSOR"},{"id":198,"origin_id":89,"origin_slot":0,"target_id":88,"target_slot":0,"type":"FLOAT_APPEARANCE_PIPE"},{"id":223,"origin_id":115,"origin_slot":0,"target_id":88,"target_slot":1,"type":"FLOAT_SYNTHESIS_MODEL"},{"id":240,"origin_id":118,"origin_slot":0,"target_id":88,"target_slot":2,"type":"TORCH_TENSOR"},{"id":230,"origin_id":116,"origin_slot":2,"target_id":117,"target_slot":0,"type":"TORCH_TENSOR"},{"id":244,"origin_id":-10,"origin_slot":0,"target_id":89,"target_slot":0,"type":"IMAGE"},{"id":243,"origin_id":-10,"origin_slot":1,"target_id":89,"target_slot":1,"type":"FLOAT_ENCODER_MODEL"},{"id":234,"origin_id":-10,"origin_slot":2,"target_id":118,"target_slot":1,"type":"FLOAT","parentId":30},{"id":245,"origin_id":-10,"origin_slot":2,"target_id":116,"target_slot":0,"type":"FLOAT","parentId":32},{"id":226,"origin_id":-10,"origin_slot":3,"target_id":116,"target_slot":1,"type":"AUDIO"},{"id":246,"origin_id":88,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"}],"reroutes":[{"id":30,"parentId":35,"pos":[1817.140380859375,1477.6329345703125],"linkIds":[234]},{"id":35,"pos":[934.838134765625,1476.7911376953125],"linkIds":[234]}],"extra":{}},{"id":"80b5a70e-7a71-44a4-b00d-79362324c08c","version":1,"state":{"lastGroupId":0,"lastNodeId":120,"lastLinkId":250,"lastRerouteId":35},"revision":0,"config":{},"name":"FLOAT","inputNode":{"id":-10,"bounding":[670,1218.0802612304688,120,120]},"outputNode":{"id":-20,"bounding":[2504.23876953125,1248.0802612304688,120,60]},"inputs":[{"id":"07fd15fa-a48e-4d2b-beee-c6fb4bcff453","name":"ref_image","type":"IMAGE","linkIds":[244],"localized_name":"ref_image","pos":{"0":770,"1":1238.080322265625}},{"id":"e44ae62b-c568-4e4c-be2d-e4185625b6e9","name":"float_encoder","type":"FLOAT_ENCODER_MODEL","linkIds":[243],"localized_name":"float_encoder","pos":{"0":770,"1":1258.080322265625}},{"id":"909a0881-6778-4af2-bb15-aecd43783ebf","name":"fps","type":"FLOAT","linkIds":[234,245],"localized_name":"fps","pos":{"0":770,"1":1278.080322265625}},{"id":"f1573760-6a28-4688-9af9-eb31a82f9ca5","name":"audio","type":"AUDIO","linkIds":[226],"localized_name":"audio","pos":{"0":770,"1":1298.080322265625}}],"outputs":[{"id":"4a5817d4-dd29-4134-a1c0-dce08a7c10ea","name":"images","type":"IMAGE","linkIds":[246],"localized_name":"images","pos":{"0":2524.23876953125,"1":1268.080322265625}}],"widgets":[],"nodes":[{"id":89,"type":"ApplyFloatEncoder","pos":[850,1100],"size":[255.1171875,86],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"ref_image","name":"ref_image","type":"IMAGE","link":244},{"localized_name":"float_encoder","name":"float_encoder","type":"FLOAT_ENCODER_MODEL","link":243}],"outputs":[{"localized_name":"appearance_pipe (Ws→r)","name":"appearance_pipe (Ws→r)","type":"FLOAT_APPEARANCE_PIPE","links":[198]},{"localized_name":"r_s_lambda_latent","name":"r_s_lambda_latent","type":"TORCH_TENSOR","links":[222]},{"localized_name":"float_encoder_out","name":"float_encoder_out","type":"FLOAT_ENCODER_MODEL","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"5787c6d5d82668b7c978f32f71e8731c5eaa0d8b","Node name for S&R":"ApplyFloatEncoder","widget_ue_connectable":{}},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":118,"type":"192ba9dc-d56d-44aa-b6a0-1e62db81fff6","pos":[1864.4227294921875,1257.5780029296875],"size":[269.3753356933594,142],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"dim_e","name":"dim_e","type":"INT","widget":{"name":"dim_e"},"link":233},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":234},{"localized_name":"r_s_latent","name":"r_s_latent","type":"TORCH_TENSOR","link":235},{"localized_name":"wa_latent","name":"wa_latent","type":"TORCH_TENSOR","link":236},{"localized_name":"audio_num_frames","name":"audio_num_frames","type":"INT","link":237},{"localized_name":"we_latent","name":"we_latent","type":"TORCH_TENSOR","link":238}],"outputs":[{"localized_name":"r_d_latents (Wr→D)","name":"r_d_latents (Wr→D)","type":"TORCH_TENSOR","links":[240]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50"},"widgets_values":[7,25],"color":"#2a363b","bgcolor":"#3f5159"},{"id":115,"type":"d544012f-f109-402f-94a3-5cec746440ae","pos":[1192.240234375,1193.22265625],"size":[246.462890625,46],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"r_s_lambda_latent","name":"r_s_lambda_latent","type":"TORCH_TENSOR","link":222}],"outputs":[{"localized_name":"float_synthesis_out","name":"float_synthesis_out","type":"FLOAT_SYNTHESIS_MODEL","links":[223]},{"localized_name":"r_s_latent (Wr→s)","name":"r_s_latent (Wr→s)","type":"TORCH_TENSOR","links":[235]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50"},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":88,"type":"ApplyFloatSynthesis","pos":[2203.75830078125,1087.3193359375],"size":[240.48046875,70],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"appearance_pipe","name":"appearance_pipe","type":"FLOAT_APPEARANCE_PIPE","link":198},{"localized_name":"float_synthesis","name":"float_synthesis","type":"FLOAT_SYNTHESIS_MODEL","link":223},{"localized_name":"r_d_latents","name":"r_d_latents","type":"TORCH_TENSOR","link":240}],"outputs":[{"localized_name":"images","name":"images","type":"IMAGE","links":[246]},{"localized_name":"float_synthesis_out","name":"float_synthesis_out","type":"FLOAT_SYNTHESIS_MODEL","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"5787c6d5d82668b7c978f32f71e8731c5eaa0d8b","Node name for S&R":"ApplyFloatSynthesis","widget_ue_connectable":{}},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":116,"type":"892d5b95-359d-4dda-9f9d-ce2003ed6b06","pos":[1199.0941162109375,1312.0333251953125],"size":[255.80982971191406,100.0697250366211],"flags":{"collapsed":false},"order":3,"mode":0,"inputs":[{"localized_name":"target_fps","name":"target_fps","type":"FLOAT","widget":{"name":"target_fps"},"link":245},{"localized_name":"audio","name":"audio","type":"AUDIO","link":226}],"outputs":[{"localized_name":"wa_latent","name":"wa_latent","type":"TORCH_TENSOR","links":[236]},{"localized_name":"audio_num_frames","name":"audio_num_frames","type":"INT","links":[237]},{"localized_name":"processed_audio_features","name":"processed_audio_features","type":"TORCH_TENSOR","links":[230]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50"},"widgets_values":[25],"color":"#2a363b","bgcolor":"#3f5159"},{"id":117,"type":"66e78b65-f474-403d-bd75-8a989931a482","pos":[1517.0186767578125,1401.187744140625],"size":[276.4378662109375,47.37982940673828],"flags":{"collapsed":false},"order":4,"mode":0,"inputs":[{"localized_name":"processed_audio_features","name":"processed_audio_features","type":"TORCH_TENSOR","link":230}],"outputs":[{"localized_name":"dim_e","name":"dim_e","type":"INT","links":[233]},{"localized_name":"we_latent","name":"we_latent","type":"TORCH_TENSOR","links":[238]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.50"},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"}],"groups":[],"links":[{"id":233,"origin_id":117,"origin_slot":0,"target_id":118,"target_slot":0,"type":"INT"},{"id":235,"origin_id":115,"origin_slot":1,"target_id":118,"target_slot":2,"type":"TORCH_TENSOR"},{"id":236,"origin_id":116,"origin_slot":0,"target_id":118,"target_slot":3,"type":"TORCH_TENSOR"},{"id":237,"origin_id":116,"origin_slot":1,"target_id":118,"target_slot":4,"type":"INT"},{"id":238,"origin_id":117,"origin_slot":1,"target_id":118,"target_slot":5,"type":"TORCH_TENSOR"},{"id":222,"origin_id":89,"origin_slot":1,"target_id":115,"target_slot":0,"type":"TORCH_TENSOR"},{"id":198,"origin_id":89,"origin_slot":0,"target_id":88,"target_slot":0,"type":"FLOAT_APPEARANCE_PIPE"},{"id":223,"origin_id":115,"origin_slot":0,"target_id":88,"target_slot":1,"type":"FLOAT_SYNTHESIS_MODEL"},{"id":240,"origin_id":118,"origin_slot":0,"target_id":88,"target_slot":2,"type":"TORCH_TENSOR"},{"id":230,"origin_id":116,"origin_slot":2,"target_id":117,"target_slot":0,"type":"TORCH_TENSOR"},{"id":244,"origin_id":-10,"origin_slot":0,"target_id":89,"target_slot":0,"type":"IMAGE"},{"id":243,"origin_id":-10,"origin_slot":1,"target_id":89,"target_slot":1,"type":"FLOAT_ENCODER_MODEL"},{"id":234,"origin_id":-10,"origin_slot":2,"target_id":118,"target_slot":1,"type":"FLOAT","parentId":30},{"id":245,"origin_id":-10,"origin_slot":2,"target_id":116,"target_slot":0,"type":"FLOAT","parentId":32},{"id":226,"origin_id":-10,"origin_slot":3,"target_id":116,"target_slot":1,"type":"AUDIO"},{"id":246,"origin_id":88,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"IMAGE"}],"reroutes":[{"id":30,"parentId":35,"pos":[1822.4622802734375,1485.1114501953125],"linkIds":[234]},{"id":35,"pos":[945.5687866210938,1403.6800537109375],"linkIds":[234]}],"extra":{}},{"id":"192ba9dc-d56d-44aa-b6a0-1e62db81fff6","version":1,"state":{"lastGroupId":0,"lastNodeId":117,"lastLinkId":232,"lastRerouteId":29},"revision":0,"config":{},"name":"Sample Motion Sequence rd","inputNode":{"id":-10,"bounding":[1583.2047410461435,1405.5590416076652,142.7265625,160]},"outputNode":{"id":-20,"bounding":[2690.3876218039763,1336.0809645435688,146.470703125,60]},"inputs":[{"id":"128559ca-ad08-4549-8e2e-6a38a5d06acc","name":"dim_e","type":"INT","linkIds":[231],"localized_name":"dim_e","pos":{"0":1705.9312744140625,"1":1425.55908203125}},{"id":"51448776-fdc5-4704-86bf-271961e8dfca","name":"fps","type":"FLOAT","linkIds":[167],"localized_name":"fps","pos":{"0":1705.9312744140625,"1":1445.55908203125}},{"id":"29385995-47cc-44ef-b7e7-47e756ca18ac","name":"r_s_latent","type":"TORCH_TENSOR","linkIds":[224],"localized_name":"r_s_latent","pos":{"0":1705.9312744140625,"1":1465.55908203125}},{"id":"33465f73-911e-4482-b179-1b62df0724f4","name":"wa_latent","type":"TORCH_TENSOR","linkIds":[227],"localized_name":"wa_latent","pos":{"0":1705.9312744140625,"1":1485.55908203125}},{"id":"4a1eade0-805b-4702-8382-b223d335ea21","name":"audio_num_frames","type":"INT","linkIds":[228],"localized_name":"audio_num_frames","pos":{"0":1705.9312744140625,"1":1505.55908203125}},{"id":"431f6ec9-b22b-4b89-9a06-4a3f907f08cd","name":"we_latent","type":"TORCH_TENSOR","linkIds":[232],"localized_name":"we_latent","pos":{"0":1705.9312744140625,"1":1525.55908203125}}],"outputs":[{"id":"2facfb6b-3d71-4c10-8c8a-58adb0628221","name":"r_d_latents (Wr→D)","type":"TORCH_TENSOR","linkIds":[220],"localized_name":"r_d_latents (Wr→D)","pos":{"0":2710.3876953125,"1":1356.0809326171875}}],"widgets":[],"nodes":[{"id":110,"type":"MarkdownNote","pos":[1620,2380],"size":[290,88],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"title":"Load FLOAT FMT Model  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["Download this model from: [here](https://huggingface.co/set-soft/float_advanced/resolve/main/fmt/fmt.safetensors?download=true)\n\nTo `ComfyUI/models/float/fmt/`"],"color":"#432","bgcolor":"#653"},{"id":112,"type":"MarkdownNote","pos":[2320,1830],"size":[320,88],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"title":"Sample Motion Sequence RD  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["This node makes the main inference"],"color":"#432","bgcolor":"#653"},{"id":78,"type":"LoadFMTModel","pos":[1867.26953125,1631.679931640625],"size":[288.4283142089844,310],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"fmt_file","name":"fmt_file","type":"COMBO","widget":{"name":"fmt_file"},"link":null},{"localized_name":"target_device","name":"target_device","type":"COMBO","widget":{"name":"target_device"},"link":null},{"localized_name":"cudnn_benchmark","name":"cudnn_benchmark","type":"BOOLEAN","widget":{"name":"cudnn_benchmark"},"link":null},{"localized_name":"dim_e","name":"dim_e","type":"INT","widget":{"name":"dim_e"},"link":231},{"localized_name":"num_heads","name":"num_heads","type":"INT","widget":{"name":"num_heads"},"link":null},{"localized_name":"attention_window","name":"attention_window","type":"INT","widget":{"name":"attention_window"},"link":null},{"localized_name":"num_prev_frames","name":"num_prev_frames","type":"INT","widget":{"name":"num_prev_frames"},"link":null},{"localized_name":"fps","name":"fps","type":"FLOAT","widget":{"name":"fps"},"link":167},{"localized_name":"wav2vec_sec","name":"wav2vec_sec","type":"FLOAT","widget":{"name":"wav2vec_sec"},"link":null}],"outputs":[{"localized_name":"float_fmt_model","name":"float_fmt_model","type":"FLOAT_FMT_MODEL","links":[219]},{"localized_name":"fps","name":"fps","type":"FLOAT","links":[171]},{"localized_name":"fmt_options_out","name":"fmt_options_out","type":"ADV_FLOAT_DICT","links":[]},{"localized_name":"conditioning_chunk_size","name":"conditioning_chunk_size","type":"INT","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"946cba9c08d2ece9be39f6af8925b29ef9ddaddc","Node name for S&R":"LoadFMTModel","widget_ue_connectable":{"fmt_file":true,"target_device":true,"cudnn_benchmark":true,"dim_e":true,"num_heads":true,"attention_window":true,"num_prev_frames":true,"fps":true,"wav2vec_sec":true}},"widgets_values":["fmt.safetensors","cuda",false,7,8,2,10,25,2],"color":"#2a363b","bgcolor":"#3f5159"},{"id":114,"type":"FloatSampleMotionSequenceRD_VA","pos":[2320,1340],"size":[319.0738220214844,450],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"r_s_latent","name":"r_s_latent","type":"TORCH_TENSOR","link":224},{"localized_name":"wa_latent","name":"wa_latent","type":"TORCH_TENSOR","link":227},{"localized_name":"audio_num_frames","name":"audio_num_frames","type":"INT","link":228},{"localized_name":"we_latent","name":"we_latent","type":"TORCH_TENSOR","link":232},{"localized_name":"float_fmt_model","name":"float_fmt_model","type":"FLOAT_FMT_MODEL","link":219},{"localized_name":"a_cfg_scale","name":"a_cfg_scale","type":"FLOAT","widget":{"name":"a_cfg_scale"},"link":null},{"localized_name":"r_cfg_scale","name":"r_cfg_scale","type":"FLOAT","widget":{"name":"r_cfg_scale"},"link":null},{"localized_name":"e_cfg_scale","name":"e_cfg_scale","type":"FLOAT","widget":{"name":"e_cfg_scale"},"link":null},{"localized_name":"include_r_cfg","name":"include_r_cfg","type":"BOOLEAN","widget":{"name":"include_r_cfg"},"link":null},{"localized_name":"nfe","name":"nfe","type":"INT","widget":{"name":"nfe"},"link":null},{"localized_name":"torchdiffeq_ode_method","name":"torchdiffeq_ode_method","type":"COMBO","widget":{"name":"torchdiffeq_ode_method"},"link":null},{"localized_name":"ode_atol","name":"ode_atol","type":"FLOAT","widget":{"name":"ode_atol"},"link":null},{"localized_name":"ode_rtol","name":"ode_rtol","type":"FLOAT","widget":{"name":"ode_rtol"},"link":null},{"localized_name":"audio_dropout_prob","name":"audio_dropout_prob","type":"FLOAT","widget":{"name":"audio_dropout_prob"},"link":null},{"localized_name":"ref_dropout_prob","name":"ref_dropout_prob","type":"FLOAT","widget":{"name":"ref_dropout_prob"},"link":null},{"localized_name":"emotion_dropout_prob","name":"emotion_dropout_prob","type":"FLOAT","widget":{"name":"emotion_dropout_prob"},"link":null},{"localized_name":"fix_noise_seed","name":"fix_noise_seed","type":"BOOLEAN","widget":{"name":"fix_noise_seed"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null}],"outputs":[{"localized_name":"r_d_latents (Wr→D)","name":"r_d_latents (Wr→D)","type":"TORCH_TENSOR","links":[220]},{"localized_name":"float_fmt_model_out","name":"float_fmt_model_out","type":"FLOAT_FMT_MODEL","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"e5945270df082102f672c20bf4a46cee936cc571","Node name for S&R":"FloatSampleMotionSequenceRD_VA","widget_ue_connectable":{}},"widgets_values":[2,1,1,false,10,"euler",0.00001,0.00001,0.1,0.1,0.1,true,15,"fixed"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":71,"type":"Note","pos":[1877.1121826171875,1999.2928466796875],"size":[280,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{"widget_ue_connectable":{}},"widgets_values":["Some experimental values:\n\n25 fps → wav2vec_sec 2\n30 fps → wav2vec_sec 1"],"color":"#432","bgcolor":"#653"}],"groups":[],"links":[{"id":219,"origin_id":78,"origin_slot":0,"target_id":114,"target_slot":4,"type":"FLOAT_FMT_MODEL"},{"id":231,"origin_id":-10,"origin_slot":0,"target_id":78,"target_slot":3,"type":"INT"},{"id":167,"origin_id":-10,"origin_slot":1,"target_id":78,"target_slot":7,"type":"FLOAT"},{"id":224,"origin_id":-10,"origin_slot":2,"target_id":114,"target_slot":0,"type":"TORCH_TENSOR"},{"id":227,"origin_id":-10,"origin_slot":3,"target_id":114,"target_slot":1,"type":"TORCH_TENSOR"},{"id":228,"origin_id":-10,"origin_slot":4,"target_id":114,"target_slot":2,"type":"INT","parentId":29},{"id":232,"origin_id":-10,"origin_slot":5,"target_id":114,"target_slot":3,"type":"TORCH_TENSOR"},{"id":220,"origin_id":114,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"TORCH_TENSOR"}],"extra":{}},{"id":"d544012f-f109-402f-94a3-5cec746440ae","version":1,"state":{"lastGroupId":0,"lastNodeId":114,"lastLinkId":221,"lastRerouteId":29},"revision":0,"config":{},"name":"Get Identity","inputNode":{"id":-10,"bounding":[658.7623506693959,1198.6362777083737,138.73046875,60]},"outputNode":{"id":-20,"bounding":[1726.6406209985723,1197.6453475235792,142.732421875,80]},"inputs":[{"id":"cee50423-ca39-49e7-b4c4-b4eab38d3ee2","name":"r_s_lambda_latent","type":"TORCH_TENSOR","linkIds":[197],"localized_name":"r_s_lambda_latent","pos":{"0":777.4927978515625,"1":1218.63623046875}}],"outputs":[{"id":"cf54a3c5-c8d6-4d5b-a3d1-5896b198df61","name":"float_synthesis_out","type":"FLOAT_SYNTHESIS_MODEL","linkIds":[188],"localized_name":"float_synthesis_out","pos":{"0":1746.640625,"1":1217.6453857421875}},{"id":"d59c69bd-33e0-4674-aa90-21c5a5c05d52","name":"r_s_latent (Wr→s)","type":"TORCH_TENSOR","linkIds":[215],"localized_name":"r_s_latent (Wr→s)","pos":{"0":1746.640625,"1":1237.6453857421875}}],"widgets":[],"nodes":[{"id":58,"type":"FloatGetIdentityReferenceVA","pos":[1366.3167724609375,1204.29052734375],"size":[262.6831970214844,46],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"r_s_lambda_latent","name":"r_s_lambda_latent","type":"TORCH_TENSOR","link":197},{"localized_name":"float_synthesis","name":"float_synthesis","type":"FLOAT_SYNTHESIS_MODEL","link":113}],"outputs":[{"localized_name":"float_synthesis_out","name":"float_synthesis_out","type":"FLOAT_SYNTHESIS_MODEL","links":[188]},{"localized_name":"r_s_latent (Wr→s)","name":"r_s_latent (Wr→s)","type":"TORCH_TENSOR","links":[215]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"6f4b3c5954ef4dbb69a1c40ea0e645103e4fe15c","Node name for S&R":"FloatGetIdentityReferenceVA","widget_ue_connectable":{}},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"},{"id":101,"type":"MarkdownNote","pos":[1370,1290],"size":[262.6831970214844,88],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"title":"FLOAT Get Identity Reference  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["The output of this node represents the reference image conditioning (wr)"],"color":"#432","bgcolor":"#653"},{"id":55,"type":"LoadFloatSynthesisModel","pos":[887.9851684570312,1296.8486328125],"size":[417.1148376464844,214],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"synthesis_file","name":"synthesis_file","type":"COMBO","widget":{"name":"synthesis_file"},"link":null},{"localized_name":"target_device","name":"target_device","type":"COMBO","widget":{"name":"target_device"},"link":null},{"localized_name":"channel_multiplier","name":"channel_multiplier","type":"INT","widget":{"name":"channel_multiplier"},"link":null},{"localized_name":"blur_kernel_str","name":"blur_kernel_str","type":"STRING","widget":{"name":"blur_kernel_str"},"link":null},{"localized_name":"cudnn_benchmark","name":"cudnn_benchmark","type":"BOOLEAN","widget":{"name":"cudnn_benchmark"},"link":null},{"localized_name":"advanced_float_options","name":"advanced_float_options","shape":7,"type":"ADV_FLOAT_DICT","link":null}],"outputs":[{"localized_name":"float_synthesis","name":"float_synthesis","type":"FLOAT_SYNTHESIS_MODEL","links":[113]},{"localized_name":"inferred_size","name":"inferred_size","type":"INT","links":null},{"localized_name":"inferred_style_dim","name":"inferred_style_dim","type":"INT","links":null},{"localized_name":"inferred_motion_dim","name":"inferred_motion_dim","type":"INT","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"6f4b3c5954ef4dbb69a1c40ea0e645103e4fe15c","Node name for S&R":"LoadFloatSynthesisModel","widget_ue_connectable":{"synthesis_file":true,"target_device":true,"channel_multiplier":true,"blur_kernel_str":true,"cudnn_benchmark":true}},"widgets_values":["decoder.safetensors","cuda",1,"[1, 3, 3, 1]",false],"color":"#2a363b","bgcolor":"#3f5159"},{"id":100,"type":"MarkdownNote","pos":[960,1550],"size":[290,88],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"Load FLOAT Synthesis  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["Download this model from: [here](https://huggingface.co/set-soft/float_advanced/resolve/main/motion_autoencoder/decoder.safetensors?download=true)\n\nTo `ComfyUI/models/float/motion_autoencoder/`"],"color":"#432","bgcolor":"#653"}],"groups":[],"links":[{"id":113,"origin_id":55,"origin_slot":0,"target_id":58,"target_slot":1,"type":"FLOAT_SYNTHESIS_MODEL"},{"id":197,"origin_id":-10,"origin_slot":0,"target_id":58,"target_slot":0,"type":"TORCH_TENSOR"},{"id":188,"origin_id":58,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"FLOAT_SYNTHESIS_MODEL"},{"id":215,"origin_id":58,"origin_slot":1,"target_id":-20,"target_slot":1,"type":"TORCH_TENSOR"}],"extra":{}},{"id":"892d5b95-359d-4dda-9f9d-ce2003ed6b06","version":1,"state":{"lastGroupId":0,"lastNodeId":115,"lastLinkId":224,"lastRerouteId":32},"revision":0,"config":{},"name":"Encode Audio to latent wa","inputNode":{"id":-10,"bounding":[-10.087645750669122,1664.1652032291863,120,80]},"outputNode":{"id":-20,"bounding":[2196.730966202573,1715.1051840721273,181.43359375,100]},"inputs":[{"id":"93ec73bc-db55-4f6b-860c-a41d660bae5f","name":"target_fps","type":"FLOAT","linkIds":[160],"localized_name":"target_fps","pos":{"0":89.912353515625,"1":1684.1651611328125}},{"id":"94fb52f1-bb73-4f11-9856-a1a1058eacd6","name":"audio","type":"AUDIO","linkIds":[57],"localized_name":"audio","pos":{"0":89.912353515625,"1":1704.1651611328125}}],"outputs":[{"id":"e6e9c5a8-fe12-44a8-b19e-d9c1e9a2948a","name":"wa_latent","type":"TORCH_TENSOR","linkIds":[216],"localized_name":"wa_latent","pos":{"0":2216.73095703125,"1":1735.105224609375}},{"id":"3635521d-cadf-44f0-9857-67c4d0e5b774","name":"audio_num_frames","type":"INT","linkIds":[221],"localized_name":"audio_num_frames","pos":{"0":2216.73095703125,"1":1755.105224609375}},{"id":"ee5c233a-79f4-4732-af6c-6cedc89c2fee","name":"processed_audio_features","type":"TORCH_TENSOR","linkIds":[163],"localized_name":"processed_audio_features","pos":{"0":2216.73095703125,"1":1775.105224609375}}],"widgets":[],"nodes":[{"id":76,"type":"FloatAudioPreprocessAndFeatureExtract","pos":[940,1720],"size":[383.78125,182],"flags":{},"order":9,"mode":0,"inputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","link":158},{"localized_name":"wav2vec_pipe","name":"wav2vec_pipe","type":"WAV2VEC_PIPE","link":173},{"localized_name":"target_fps","name":"target_fps","type":"FLOAT","widget":{"name":"target_fps"},"link":160},{"localized_name":"only_last_features","name":"only_last_features","type":"BOOLEAN","widget":{"name":"only_last_features"},"link":null}],"outputs":[{"localized_name":"wav2vec_features","name":"wav2vec_features","type":"TORCH_TENSOR","links":[164]},{"localized_name":"audio_num_frames","name":"audio_num_frames","type":"INT","links":[221]},{"localized_name":"processed_audio_features","name":"processed_audio_features","type":"TORCH_TENSOR","links":[163]},{"localized_name":"wav2vec_pipe_out","name":"wav2vec_pipe_out","type":"WAV2VEC_PIPE","links":null},{"localized_name":"audio","name":"audio","type":"AUDIO","links":null},{"localized_name":"fps","name":"fps","type":"FLOAT","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"ba5de66d7ccb70613c7efdfafb29f3443a27d998","Node name for S&R":"FloatAudioPreprocessAndFeatureExtract","widget_ue_connectable":{"target_fps":true,"only_last_features":true}},"widgets_values":[25,false],"color":"#2a363b","bgcolor":"#3f5159"},{"id":108,"type":"MarkdownNote","pos":[941.078125,1950.671875],"size":[380,88],"flags":{},"order":0,"mode":0,"inputs":[],"outputs":[],"title":"FLOAT Audio Feature Extract  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["This model process the audio and generates a representation that will be used to extract the emotion and the audio conditioning"],"color":"#432","bgcolor":"#653"},{"id":80,"type":"LoadWav2VecModel","pos":[185.7734832763672,1801.6695556640625],"size":[341.8296813964844,102],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"model_folder","name":"model_folder","type":"COMBO","widget":{"name":"model_folder"},"link":null},{"localized_name":"target_device","name":"target_device","type":"COMBO","widget":{"name":"target_device"},"link":null}],"outputs":[{"localized_name":"sampling_rate","name":"sampling_rate","type":"INT","links":[172]},{"localized_name":"wav2vec_pipe","name":"wav2vec_pipe","type":"WAV2VEC_PIPE","links":[173]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"cd98751e337e7ad09488b7a1af6f8d298ccdd12f","Node name for S&R":"LoadWav2VecModel","widget_ue_connectable":{}},"widgets_values":["wav2vec2-base-960h","cuda"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":105,"type":"MarkdownNote","pos":[179.06016540527344,1949.1824951171875],"size":[341.8296813964844,120],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"Load Wav2Vec Model (for Audio Encoding)  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["Download this model from: [here](https://huggingface.co/facebook/wav2vec2-base-960h/tree/main)\n\nThe whole folder goes to `ComfyUI/models/audio/wav2vec2-base-960h/`\n\nDon't download the `.bin` and `.h5` files, the `.safetensors` is enough."],"color":"#432","bgcolor":"#653"},{"id":106,"type":"MarkdownNote","pos":[603.51416015625,1434.226806640625],"size":[267.1470642089844,90],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"title":"Audio Channel Conv and Resampler","properties":{"widget_ue_connectable":{}},"widgets_values":["This node ensures the audio is mono @ 16 kHz. Is part of my AudioBatch nodes."],"color":"#432","bgcolor":"#653"},{"id":34,"type":"SET_AudioChannelConvResampler","pos":[566.9777221679688,1582.8189697265625],"size":[327.1470642089844,154],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"audio","name":"audio","type":"AUDIO","link":57},{"localized_name":"channel_conversion","name":"channel_conversion","type":"COMBO","widget":{"name":"channel_conversion"},"link":null},{"localized_name":"target_sample_rate","name":"target_sample_rate","type":"INT","widget":{"name":"target_sample_rate"},"link":172},{"localized_name":"downmix_method","name":"downmix_method","type":"COMBO","widget":{"name":"downmix_method"},"link":null},{"localized_name":"n_fft","name":"n_fft","shape":7,"type":"INT","widget":{"name":"n_fft"},"link":null},{"localized_name":"hop_length","name":"hop_length","shape":7,"type":"INT","widget":{"name":"hop_length"},"link":null}],"outputs":[{"localized_name":"audio_out","name":"audio_out","type":"AUDIO","links":[158]}],"properties":{"cnr_id":"audio-batch","ver":"1.0.0","Node name for S&R":"SET_AudioChannelConvResampler","widget_ue_connectable":{"channel_conversion":true,"target_sample_rate":true}},"widgets_values":["force_mono",16000,"standard_gain",2048,512],"color":"#223","bgcolor":"#335"},{"id":103,"type":"MarkdownNote","pos":[1830.0361328125,1429.0943603515625],"size":[290,88],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"title":"FLOAT Apply Audio Projection  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["The output of this node represents the audio conditioning (wa)"],"color":"#432","bgcolor":"#653"},{"id":35,"type":"LoadAudioProjectionLayer","pos":[1394.1920166015625,1412.4158935546875],"size":[383.1812438964844,130],"flags":{"collapsed":false},"order":5,"mode":0,"inputs":[{"localized_name":"projection_file","name":"projection_file","type":"COMBO","widget":{"name":"projection_file"},"link":null},{"localized_name":"target_device","name":"target_device","type":"COMBO","widget":{"name":"target_device"},"link":null}],"outputs":[{"localized_name":"projection_layer","name":"projection_layer","type":"AUDIO_PROJECTION_LAYER","links":[61]},{"localized_name":"inferred_input_dim","name":"inferred_input_dim","type":"INT","links":null},{"localized_name":"dim_a","name":"dim_a","type":"INT","links":[]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"002ed938d83c893aa7646ac933776dadfa84ac33","Node name for S&R":"LoadAudioProjectionLayer","widget_ue_connectable":{"projection_file":true,"target_device":true}},"widgets_values":["projection.safetensors","cuda"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":102,"type":"MarkdownNote","pos":[1396.696533203125,1584.921142578125],"size":[290,88],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"title":"Load Audio Projection Layer  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["Download this model from: [here](https://huggingface.co/set-soft/float_advanced/resolve/main/audio_projections/projection.safetensors?download=true)\n\nTo `ComfyUI/models/float/audio_projections/`"],"color":"#432","bgcolor":"#653"},{"id":36,"type":"FloatApplyAudioProjection","pos":[1830.0361328125,1339.0943603515625],"size":[290,50],"flags":{"collapsed":false},"order":8,"mode":0,"inputs":[{"localized_name":"wav2vec_features","name":"wav2vec_features","type":"TORCH_TENSOR","link":164},{"localized_name":"projection_layer","name":"projection_layer","type":"AUDIO_PROJECTION_LAYER","link":61}],"outputs":[{"localized_name":"wa_latent","name":"wa_latent","type":"TORCH_TENSOR","links":[216]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"002ed938d83c893aa7646ac933776dadfa84ac33","Node name for S&R":"FloatApplyAudioProjection","widget_ue_connectable":{}},"widgets_values":[],"color":"#2a363b","bgcolor":"#3f5159"}],"groups":[],"links":[{"id":164,"origin_id":76,"origin_slot":0,"target_id":36,"target_slot":0,"type":"TORCH_TENSOR","parentId":32},{"id":61,"origin_id":35,"origin_slot":0,"target_id":36,"target_slot":1,"type":"AUDIO_PROJECTION_LAYER"},{"id":158,"origin_id":34,"origin_slot":0,"target_id":76,"target_slot":0,"type":"AUDIO"},{"id":173,"origin_id":80,"origin_slot":1,"target_id":76,"target_slot":1,"type":"WAV2VEC_PIPE"},{"id":172,"origin_id":80,"origin_slot":0,"target_id":34,"target_slot":2,"type":"INT"},{"id":160,"origin_id":-10,"origin_slot":0,"target_id":76,"target_slot":2,"type":"FLOAT","parentId":31},{"id":57,"origin_id":-10,"origin_slot":1,"target_id":34,"target_slot":0,"type":"AUDIO","parentId":18},{"id":216,"origin_id":36,"origin_slot":0,"target_id":-20,"target_slot":0,"type":"TORCH_TENSOR"},{"id":221,"origin_id":76,"origin_slot":1,"target_id":-20,"target_slot":1,"type":"INT","parentId":29},{"id":163,"origin_id":76,"origin_slot":2,"target_id":-20,"target_slot":2,"type":"TORCH_TENSOR"}],"reroutes":[{"id":30,"pos":[157.65538024902344,2103.583251953125],"linkIds":[160]},{"id":31,"parentId":30,"pos":[512.6895141601562,2107.315673828125],"linkIds":[160]},{"id":32,"pos":[1376.158447265625,1369.339111328125],"linkIds":[164]}],"extra":{}},{"id":"66e78b65-f474-403d-bd75-8a989931a482","version":1,"state":{"lastGroupId":0,"lastNodeId":116,"lastLinkId":229,"lastRerouteId":29},"revision":0,"config":{},"name":"Encode Emotion to latent we","inputNode":{"id":-10,"bounding":[745.953620240289,1777.4537279591996,181.43359375,60]},"outputNode":{"id":-20,"bounding":[1980,2056.0728759765625,120,80]},"inputs":[{"id":"068e18a6-f8c5-4282-93ed-2848ff1bdead","name":"processed_audio_features","type":"TORCH_TENSOR","linkIds":[229],"localized_name":"processed_audio_features","pos":{"0":907.38720703125,"1":1797.4537353515625}}],"outputs":[{"id":"69cd6a4f-2bab-41de-bdb5-aa995476aaec","name":"dim_e","type":"INT","linkIds":[166],"localized_name":"dim_e","pos":{"0":2000,"1":2076.07275390625}},{"id":"1d82f2d0-6f3d-43a4-bedf-8aa6821bf565","name":"we_latent","type":"TORCH_TENSOR","linkIds":[218],"localized_name":"we_latent","pos":{"0":2000,"1":2096.07275390625}}],"widgets":[],"nodes":[{"id":44,"type":"LoadEmotionRecognitionModel","pos":[960,2130],"size":[409.96868896484375,102],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"model_folder","name":"model_folder","type":"COMBO","widget":{"name":"model_folder"},"link":null},{"localized_name":"target_device","name":"target_device","type":"COMBO","widget":{"name":"target_device"},"link":null}],"outputs":[{"localized_name":"emotion_model_pipe","name":"emotion_model_pipe","type":"EMOTION_MODEL_PIPE","links":[71]},{"localized_name":"dim_e","name":"dim_e","type":"INT","links":[166]}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"1734e37ec582b76a97f2a394fdef78dd654b2aea","Node name for S&R":"LoadEmotionRecognitionModel","widget_ue_connectable":{"model_folder":true,"target_device":true}},"widgets_values":["wav2vec-english-speech-emotion-recognition","cuda"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":111,"type":"MarkdownNote","pos":[1570,1900],"size":[350,90],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"title":"FLOAT Extract Emotion from Features  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["The output of this node represents the emotion conditioning (we). Can be from the audio or one selected."],"color":"#432","bgcolor":"#653"},{"id":45,"type":"FloatExtractEmotionWithCustomModel","pos":[1571.390625,1782.145751953125],"size":[347.5732727050781,78],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"processed_audio_features","name":"processed_audio_features","type":"TORCH_TENSOR","link":229},{"localized_name":"emotion_model_pipe","name":"emotion_model_pipe","type":"EMOTION_MODEL_PIPE","link":71},{"localized_name":"emotion","name":"emotion","type":"COMBO","widget":{"name":"emotion"},"link":null}],"outputs":[{"localized_name":"we_latent","name":"we_latent","type":"TORCH_TENSOR","links":[218]},{"localized_name":"emotion_model_pipe_out","name":"emotion_model_pipe_out","type":"EMOTION_MODEL_PIPE","links":null}],"properties":{"aux_id":"set-soft/ComfyUI-FLOAT","ver":"1734e37ec582b76a97f2a394fdef78dd654b2aea","Node name for S&R":"FloatExtractEmotionWithCustomModel","widget_ue_connectable":{"emotion":true}},"widgets_values":["none"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":107,"type":"MarkdownNote","pos":[982.1202392578125,2276.812255859375],"size":[341.8296813964844,120],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"title":"Load Emotion Recognition Model  (VA)","properties":{"widget_ue_connectable":{}},"widgets_values":["Download this model from: [here](https://huggingface.co/r-f/wav2vec-english-speech-emotion-recognition/tree/main)\n\nThe whole folder goes to `ComfyUI/models/audio/wav2vec-english-speech-emotion-recognition/`"],"color":"#432","bgcolor":"#653"}],"groups":[],"links":[{"id":71,"origin_id":44,"origin_slot":0,"target_id":45,"target_slot":1,"type":"EMOTION_MODEL_PIPE"},{"id":229,"origin_id":-10,"origin_slot":0,"target_id":45,"target_slot":0,"type":"TORCH_TENSOR"},{"id":166,"origin_id":44,"origin_slot":1,"target_id":-20,"target_slot":0,"type":"INT"},{"id":218,"origin_id":45,"origin_slot":0,"target_id":-20,"target_slot":1,"type":"TORCH_TENSOR"}],"extra":{}}]},"config":{},"extra":{"ue_links":[],"links_added_by_ue":[],"ds":{"scale":1.7415946891837748,"offset":[120.87781492715685,-801.8617425827816]}},"version":0.4}
